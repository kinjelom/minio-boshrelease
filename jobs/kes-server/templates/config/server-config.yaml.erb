###
# KES configuration file - https://min.io/docs/kes/tutorials/configuration/#config-file
###

version: v1

address: <%= p("address") %>:<%= p("port") %>

admin:
  identity: ADMIN_IDENTITY_PLACEHOLDER

tls:
  key: /var/vcap/jobs/kes-server/config/certs/kes-server/kes-server.key
  cert: /var/vcap/jobs/kes-server/config/certs/kes-server/kes-server.crt
  password: ""
  ca: /var/vcap/jobs/kes-server/config/certs/kes-clients/cas

api:
  /v1/ready:
    skip_auth: true
    timeout:   15s
  /v1/status:
    skip_auth: true

log:
  error: on
  audit: on

keystore:
  credhub:
    base_url: <%= p("keystore.credhub.base_url") %>
    enable_mutual_tls: <%= p("keystore.credhub.enable_mutual_tls") %>
    client_cert_file_path: /var/vcap/jobs/kes-server/config/certs/credhub/credhub-client.crt
    client_key_file_path: /var/vcap/jobs/kes-server/config/certs/credhub/credhub-client.key
    server_insecure_skip_verify: <%= p("keystore.credhub.server_insecure_skip_verify") %>
    server_ca_cert_file_path: /var/vcap/jobs/kes-server/config/certs/credhub/credhub-server-ca.crt
    namespace: <%= p("keystore.credhub.namespace") %>
    force_base64_values_encoding: <%= p("keystore.credhub.force_base64_values_encoding") %>
